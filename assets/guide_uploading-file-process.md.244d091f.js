import{_ as e,c as o,o as i,a as d}from"./app.33b64e60.js";const m='{"title":"Uploading File Process","description":"","frontmatter":{},"headers":[],"relativePath":"guide/uploading-file-process.md"}',s={},r=d('<h1 id="uploading-file-process" tabindex="-1">Uploading File Process <a class="header-anchor" href="#uploading-file-process" aria-hidden="true">#</a></h1><p>This describes the process of <code>spa-client</code> uploading files to admin server.</p><p>Firstly, there are lots of files needed upload, so <code>retry</code> and <code>correct</code> must be considered. there may exist large files which more than 20M(we would consider it later, we would have lots work to do to support resume breakpoint).</p><p>So the admin-server should provider api to show file metadata for checking file md5 and uploading status in server to avoid uploading conflict.</p><p>According to file metadata on the server side, <code>spa-client</code> could decide which file should be uploaded and which not, this could save time when network errors happen.</p><p>Admin-server also needs to know which version is in the process of receiving files after restart. So when <code>spa-client</code> begin to upload file, it should tell admin-server, and admin-server add a file <code>.SPA-Processing</code> to the directory <code>$Domain/$Version</code> if it not exists. admin-server will also reject the client uploading file if the version is not set <code>.SPA-Prpccessing</code>. When <code>spa-client</code> tell admin-server uploading is finished, admin-server should remove the file <code>.SPA-Processing</code>. The version which has <code>.SPA-Processing</code> should not be allowed to be online.</p><p>The above article do not consider how to deal with <code>S3</code> storage, we may later bring <code>S3</code> http client to admin-server or <code>spa-client</code>, and do some work to improve the performance of <code>S3</code> files which are not cached in <code>spa-server</code>.</p>',7),t=[r];function c(a,n,l,p,h,f){return i(),o("div",null,t)}var _=e(s,[["render",c]]);export{m as __pageData,_ as default};
